import Head from 'next/head';
import Script from 'next/script';
import { useEffect } from 'react';

export default function Home() {
  useEffect(() => {
    // Size the canvas to fill the browser viewport.
    const resizeCanvas = () => {
      if (window.cr_sizeCanvas) {
        window.cr_sizeCanvas(window.innerWidth, window.innerHeight);
      }
    };

    window.addEventListener('resize', resizeCanvas);

    // Start the Construct 2 project running on window load.
    if (window.cr_createRuntime) {
      window.cr_createRuntime('c2canvas');
    }

    // Pause and resume on page becoming visible/invisible
    const onVisibilityChanged = () => {
      if (document.hidden || document.mozHidden || document.webkitHidden || document.msHidden) {
        window.cr_setSuspended(true);
      } else {
        window.cr_setSuspended(false);
      }
    };

    document.addEventListener('visibilitychange', onVisibilityChanged, false);
    document.addEventListener('mozvisibilitychange', onVisibilityChanged, false);
    document.addEventListener('webkitvisibilitychange', onVisibilityChanged, false);
    document.addEventListener('msvisibilitychange', onVisibilityChanged, false);

    // Service worker registration
    if (navigator.serviceWorker && navigator.serviceWorker.register) {
      navigator.serviceWorker.register('sw.js', { scope: './' });
    }

    return () => {
      window.removeEventListener('resize', resizeCanvas);
      document.removeEventListener('visibilitychange', onVisibilityChanged, false);
      document.removeEventListener('mozvisibilitychange', onVisibilityChanged, false);
      document.removeEventListener('webkitvisibilitychange', onVisibilityChanged, false);
      document.removeEventListener('msvisibilitychange', onVisibilityChanged, false);
    };
  }, []);

  return (
    <>
      <Head>
        <title>Emoji Squeeze</title>
        <meta charSet="UTF-8" />
        <meta httpEquiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <link rel="manifest" href="/emoji-squeeze/appmanifest.json" />
        <link rel="apple-touch-icon" sizes="256x256" href="/emoji-squeeze/icon-256.png" />
        <meta name="mobile-web-app-capable" content="yes" />
        <link rel="shortcut icon" sizes="256x256" href="/emoji-squeeze/icon-256.png" />
      </Head>

      <style type="text/css">
		* {
			padding: 0;
			margin: 0;
		}
		html, body {
			background: #000;
			color: #fff;
			overflow: hidden;
			touch-action: none; /* Corrected property */
			-ms-touch-action: none;
		}
		canvas {
			touch-action: none; /* Removed invalid property */
			-ms-touch-action: none;
		}
	</style>
	

      <div id="c2canvasdiv">
        <canvas id="c2canvas" width="540" height="960">
          <h1>
            Your browser does not appear to support HTML5. Try upgrading your browser to the latest version. 
            <a href="http://www.whatbrowser.org">What is a browser?</a>
            <br /><br />
            <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx">Microsoft Internet Explorer</a><br />
            <a href="http://www.mozilla.com/firefox/">Mozilla Firefox</a><br />
            <a href="http://www.google.com/chrome/">Google Chrome</a><br />
            <a href="http://www.apple.com/safari/download/">Apple Safari</a><br />
            <a href="http://www.google.com/chromeframe">Google Chrome Frame for Internet Explorer</a><br />
          </h1>
        </canvas>
      </div>

      <Script src="/emoji-squeeze/jquery-2.1.1.min.js" strategy="afterInteractive" />
      <Script src="/emoji-squeeze/c2runtime.js" strategy="afterInteractive" />
    </>
  );
}
